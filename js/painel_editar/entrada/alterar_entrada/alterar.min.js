$(document).ready(function(){var l;var f;var k;c();function i(){var m=$("#dataEntrada");m.datepicker(formatoData)}function a(m){var p=$("#formItem");var o='<option value="0">Item</option>';p.empty();for(var q in tipos){if(tipos.hasOwnProperty(q)&&tipos[q]["id_tipo"]==m){for(var n in itens){if(itens.hasOwnProperty(n)&&itens[n]["id_tipo"]==tipos[q]["id_tipo"]){o+='<option value="'+itens[n]["id_item"]+'">'+itens[n]["nome"]+"</option>"}}}}p.append(o)}function g(){var n=$("#formAlterarEntrada");var m=$("#myModal");if(!h()){n.submit()}else{m.modal("hide")}}function c(){var n=$("#botaoAlterarDados");var o=$("#formItem");var p=$("#formItem option:selected");var m=$("#formTipo");var q=$("#confFormEnviar");b();d(p.val());n.click(function(){if(!h()){e();j();q.click(function(){g()})}else{q.off()}});m.change(function(){a($(this).val())});o.change(function(){d($(this).val())});i()}function e(){var m=$("#myModal");m.modal("show")}function d(o){var p=$("#labelUnidade");for(var n in itens){if(itens.hasOwnProperty(n)&&itens[n]["id_item"]==o){for(var m in unidades){if(unidades.hasOwnProperty(m)&&unidades[m]["unidade_id"]==itens[n]["unidade_padrao_id"]){p.text(unidades[m]["nome"]);return}}}}}function b(){var n=$("#formDataEntrada");var m=$("#formNumeroNota");var o=$("#formQuantidade");l=n.val();f=m.val();k=o.val()}function j(){var u=$("#confFormCodigoContrato");var x=$("#confFormDataEntrada");var s=$("#confFormItem");var o=$("#confFormNumeroNota");var r=$("#confFormQuantidade");var m=$("#confFormTipo");var v=$("#confFormUnidade");var w=$("#formCodigoContrato");var p=$("#formDataEntrada");var n=$("#formItem");var q=$("#formNumeroNota");var t=$("#formQuantidade");var z=$("#formTipo");var y=$("#formUnidade");u.text(w.val());x.text(p.val());o.text(q.val());s.text(n.val());r.text(t.val());m.text(z.val());v.text(y.html())}function h(){var p=$("#formCodigoContrato");var n=$("#formDataEntrada");var s=$("#formItem option:selected");var m=$("#formNumeroNota");var q=$("#formQuantidade");var o=$("#formTipo option:selected");var r=false;if(n.val()==""){r=true;notificacao_alerta("Selecione uma <b>Data de Entrada</b>.")}else{if(pegaData(n.val())>new Date()){r=true;notificacao_alerta("A <b>Data Entrada</b> não pode ser maior que a data atual.")}else{if($.trim(m)==""){r=true;notificacao_alerta("Insira um <b>Número da Nota</b>")}else{if(s.val()==0){r=true;notificacao_alerta("Selecione um <b>Item</b>.")}else{if(o.val()==0){r=true;notificacao_alerta("Selecione um <b>Tipo</b>.")}else{if(isNaN(q.val())){r=true;notificacao_alerta("Insira apenas números em <b>Quantidade</b>.")}else{if(parseInt(q.val())==0){r=true;notificacao_alerta("Insira um número maior que zero em <b>Quantidade</b>.")}else{if(l==n.val()&&f==m.val()&&k==q.val()){r=true;notificacao_alerta("Não há nenhuma atualização nos campos.")}else{$.ajax({async:false,url:urlBase+"api/paineleditar/entrada/alterarentrada/datavigencia?idContrato="+idContrato,type:"get",success:function(u,t){if(u.sucesso==true){var v=u.resposta;if((pegaData(n.val())>pegaData(v.data_fim))||(pegaData(n.val())<pegaData(v.data_inicio))){r=true;notificacao_alerta("A <b>Data Entrada</b> deverá pertencer ao período de vigência do contrato. Período de vigência do contrato: de <b>"+v.data_inicio+"</b> até <b>"+v.data_fim+"</b>")}}},error:function(v,u,t){r=true;notificacao_alerta("Falha na conexão com a rede.")}})}}}}}}}}return r}});